<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Interactive Arithmetic & Probability Textbook</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<!-- jsPDF for certificate generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body {font-family: 'Poppins', sans-serif; margin:0; background:#f0f8ff; color:#222;}
  header {background: linear-gradient(to right,#0078d7,#00b4d8); color:white; text-align:center; padding:20px 10px; font-size:2em; font-weight:600;}
  main {padding:20px; max-width:900px; margin:auto;}
  .chapter {background:white; border-radius:12px; padding:20px; margin-bottom:25px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
  button {background:#0078d7; color:white; border:none; padding:10px 20px; border-radius:8px; cursor:pointer; font-size:1em; margin-top:10px;}
  button:hover {background:#005fa3;}
  input[type="text"], input[type="number"] {padding:8px; border-radius:6px; border:1px solid #ccc; width:80%; margin-top:5px;}
  .example-box {display:flex; justify-content:center; gap:15px; margin:10px 0; flex-wrap:wrap;}
  .number-box {background:#ffeb3b; padding:15px; border-radius:10px; font-size:1.5em; width:70px; text-align:center; box-shadow:0 2px 6px rgba(0,0,0,0.2); transition:transform 0.3s;}
  .number-box:active {transform:scale(1.1);}
  .drop-zone {border:2px dashed #888; padding:15px; text-align:center; border-radius:8px; min-height:50px; margin-top:10px;}
  .practice, .challenge {margin-top:20px; padding:15px; border-radius:10px; background:#e0f7fa;}
  .timer {font-weight:bold; font-size:1.1em; color:#d32f2f;}
  .progress {background:#ddd; border-radius:20px; overflow:hidden; margin-top:10px;}
  .progress-bar {height:20px; width:0%; background:#4caf50; text-align:center; color:white; font-size:0.8em;}
  /* Probability chapter styles */
  .color-ball {width:50px; height:50px; border-radius:50%; box-shadow:0 2px 6px rgba(0,0,0,0.2); transition:transform 0.3s;}
  .color-ball:hover {transform:scale(1.1);}
  @media (max-width:600px){
    body {font-size:1em;}
    header {font-size:1.2em;}
    .chapter {padding:15px; margin-bottom:20px;}
    button {padding:8px 16px; font-size:0.9em;}
    .number-box {width:60px; font-size:1.3em; padding:12px;}
    .color-ball {width:40px; height:40px;}
  }
</style>
</head>
<body>
<header>📘 Interactive Arithmetic & Probability Textbook</header>
<main>
<section id="intro" class="chapter">
<h2>Welcome!</h2>
<p>This interactive textbook helps you master arithmetic and probability through fun examples and exercises.</p>
<p><strong>Enter your name to begin:</strong></p>
<input type="text" id="studentName" placeholder="Enter your full name" />
<br><br>
<button onclick="startLesson('addition')">Start Chapter 1: Addition ➕</button>
<button onclick="startLesson('probability')">Start Chapter 2: Probability 🎲</button>
</section>

<!-- Addition Lesson -->
<section id="lesson" class="chapter" style="display:none;">
<h2 id="lesson-title">Chapter 1: Addition</h2>
<p>Addition means joining two or more numbers to find the total. For example, <strong>3 + 2 = 5</strong> means you had 3 objects and got 2 more.</p>
<h3>🔹 Visual Example</h3>
<div class="example-box">
  <div class="number-box" id="apple1">🍎🍎🍎</div>
  <div class="number-box">+</div>
  <div class="number-box" id="apple2">🍎🍎</div>
  <div class="number-box">=</div>
  <div class="number-box" id="apple3">🍎🍎🍎🍎🍎</div>
</div>
<p>3 apples + 2 apples = 5 apples</p>
<h3>🔹 Try it yourself!</h3>
<p>Drag both numbers into the box to see their sum:</p>
<div class="example-box">
  <div class="number-box" draggable="true" ondragstart="drag(event)" id="num1">4</div>
  <div class="number-box" draggable="true" ondragstart="drag(event)" id="num2">7</div>
</div>
<div class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)">
  Drop numbers here 👇
</div>
<p id="sumResult"></p>
<div class="practice">
  <h3>🧩 Quick Practice</h3>
  <p id="practiceQ"></p>
  <input type="number" id="practiceA" placeholder="Type your answer" />
  <button onclick="checkPractice()">Check</button>
  <p id="practiceFeedback"></p>
  <button onclick="newPractice()">Next Question</button>
</div>
<div class="challenge">
  <h3>⚡ 30-Second Challenge!</h3>
  <p>Answer as many as you can before time runs out!</p>
  <p id="challengeQ">Press Start to begin.</p>
  <input type="number" id="challengeA" placeholder="Your answer" />
  <button onclick="checkChallenge()">Submit</button>
  <p id="challengeFeedback"></p>
  <p class="timer" id="timer">Time: 30s</p>
  <button onclick="startChallenge()">Start Challenge</button>
</div>
<button onclick="startQuiz()">Start Final Quiz ➡️</button>
</section>

<!-- Probability Lesson -->
<section id="probability" class="chapter" style="display:none;">
<h2>Chapter 2: Probability</h2>
<p>Probability tells us how likely something is to happen.</p>
<h3>🔹 Visual Example</h3>
<p>Imagine a bag with four coloured balls. Each is equally likely to be picked:</p>
<div class="example-box">
  <div class="color-ball" style="background:#e74c3c;"></div>
  <div class="color-ball" style="background:#3498db;"></div>
  <div class="color-ball" style="background:#2ecc71;"></div>
  <div class="color-ball" style="background:#f1c40f;"></div>
</div>
<button onclick="drawBall()">Draw a Ball 🎲</button>
<p id="drawResult"></p>
<div class="practice">
  <h3>🧩 Quick Practice</h3>
  <p id="probPracticeQ"></p>
  <input type="text" id="probPracticeA" placeholder="Type answer e.g. 2/5" />
  <button onclick="checkProbPractice()">Check</button>
  <p id="probPracticeFeedback"></p>
  <button onclick="newProbPractice()">Next Question</button>
</div>
</section>

<!-- Quiz -->
<section id="quiz" class="chapter" style="display:none;">
<h2>Quiz: Test Your Skills</h2>
<div id="quiz-container"></div>
<div class="progress">
  <div class="progress-bar" id="progress-bar">0%</div>
</div>
</section>
</main>

<script>
let score = 0;
let questionCount = 0;
let studentName = "";
let probQuestion = {};

// Start the selected lesson
function startLesson(type){
  studentName = document.getElementById("studentName").value.trim();
  if(!studentName){ alert("Please enter your name before starting."); return; }
  document.getElementById("intro").style.display = "none";
  document.getElementById("lesson").style.display = "none";
  document.getElementById("probability").style.display = "none";
  if(type === 'addition'){
    document.getElementById("lesson").style.display = "block";
    newPractice();
  }
  if(type === 'probability'){
    document.getElementById("probability").style.display = "block";
    newProbPractice();
  }
}

// Drag & Drop functions for addition example
function allowDrop(ev){ ev.preventDefault(); }
function drag(ev){ ev.dataTransfer.setData("text", ev.target.id); }
function drop(ev){ ev.preventDefault(); const num1 = parseInt(document.getElementById("num1").innerText); const num2 = parseInt(document.getElementById("num2").innerText); const sum = num1 + num2; document.getElementById("sumResult").innerText = `✅ ${num1} + ${num2} = ${sum}`; }

// Addition practice question
let a, b;
function newPractice(){ a = Math.floor(Math.random()*10)+1; b = Math.floor(Math.random()*10)+1; document.getElementById("practiceQ").innerText = `What is ${a} + ${b}?`; document.getElementById("practiceA").value = ''; document.getElementById("practiceFeedback").innerText = ''; }
function checkPractice(){ const ans = parseInt(document.getElementById("practiceA").value); if(ans === a + b){ document.getElementById("practiceFeedback").innerText = "🎉 Correct!"; } else { document.getElementById("practiceFeedback").innerText = `❌ Try again. The answer is ${a + b}.`; } }

// 30-second addition challenge
let challengeScore = 0, timerSec = 30, cA, cB, timerInterval;
function startChallenge(){ challengeScore = 0; timerSec = 30; nextChallenge(); clearInterval(timerInterval); timerInterval = setInterval(() => { timerSec--; document.getElementById("timer").innerText = `Time: ${timerSec}s`; if(timerSec <= 0){ clearInterval(timerInterval); document.getElementById("challengeFeedback").innerText = `Time’s up! You got ${challengeScore} correct.`; document.getElementById("challengeQ").innerText = "Challenge Over!"; } }, 1000); }
function nextChallenge(){ cA = Math.floor(Math.random()*20); cB = Math.floor(Math.random()*20); document.getElementById("challengeQ").innerText = `What is ${cA} + ${cB}?`; document.getElementById("challengeA").value = ""; }
function checkChallenge(){ const ans = parseInt(document.getElementById("challengeA").value); if(timerSec <= 0) return; if(ans === cA + cB){ challengeScore++; document.getElementById("challengeFeedback").innerText = "✅ Correct!"; } else { document.getElementById("challengeFeedback").innerText = `❌ ${cA + cB} was correct.`; } nextChallenge(); }

// Addition quiz
function startQuiz(){ document.getElementById("lesson").style.display = "none"; document.getElementById("quiz").style.display = "block"; score = 0; questionCount = 0; nextQuestion(); }
function nextQuestion(){ if(questionCount >= 5){ showResult(); return; } const a = Math.floor(Math.random()*20); const b = Math.floor(Math.random()*20); const correctAnswer = a + b; questionCount++; document.getElementById("quiz-container").innerHTML = `<div class="question"><p><strong>Question ${questionCount}:</strong> What is ${a} + ${b}?</p><input type="number" id="userAnswer" placeholder="Enter answer" /><button onclick="checkAnswer(${correctAnswer})">Submit</button></div>`; }
function checkAnswer(correctAnswer){ const userAnswer = parseInt(document.getElementById("userAnswer").value); if(userAnswer === correctAnswer){ alert("✅ Correct!"); score++; } else { alert("❌ Incorrect. The correct answer is " + correctAnswer); } const progress = (questionCount / 5) * 100; const bar = document.getElementById("progress-bar"); bar.style.width = progress + "%"; bar.textContent = Math.round(progress) + "%"; nextQuestion(); }
function showResult(){ document.getElementById("quiz-container").innerHTML = `<h3>🎉 Great job, ${studentName}!</h3><p>You completed Chapter 1: Addition.</p><p>Your final score: <strong>${score} / 5</strong></p><button onclick="downloadCertificate()">🎓 Download Certificate</button><br><br><button onclick="location.reload()">Restart</button>`; document.getElementById("progress-bar").style.width = "100%"; document.getElementById("progress-bar").textContent = "100%"; }

// Probability functions
function drawBall(){ const colors = ['Red','Blue','Green','Yellow']; const picked = colors[Math.floor(Math.random()*colors.length)]; document.getElementById("drawResult").innerText = `You drew a ${picked} ball.`; }
function newProbPractice(){ const total = Math.floor(Math.random()*6) + 3; const blue = Math.floor(Math.random() * (total - 1)) + 1; const red = total - blue; probQuestion.blue = blue; probQuestion.total = total; document.getElementById("probPracticeQ").innerText = `A bag has ${blue} blue balls and ${red} red balls. What is the probability of drawing a blue ball? (as a fraction)`; document.getElementById("probPracticeA").value = ''; document.getElementById("probPracticeFeedback").innerText = ''; }
function checkProbPractice(){ const ans = document.getElementById("probPracticeA").value.trim(); const correct = `${probQuestion.blue}/${probQuestion.total}`; if(ans === correct){ document.getElementById("probPracticeFeedback").innerText = '🎉 Correct!'; } else { document.getElementById("probPracticeFeedback").innerText = `❌ The correct answer is ${correct}.`; } }

// Certificate generation using jsPDF
function downloadCertificate(){ const { jsPDF } = window.jspdf; const doc = new jsPDF({ orientation:'landscape' }); doc.setDrawColor(0, 128, 255); doc.setLineWidth(10); doc.rect(10,10,270,190); doc.setFillColor(240,248,255); doc.rect(20,20,250,170,'F'); doc.setFont('helvetica','bold'); doc.setFontSize(28); doc.setTextColor(0,51,102); doc.text('Certificate of Achievement', 70, 50); doc.setFontSize(20); doc.setTextColor(0,0,0); doc.text('Awarded to:', 50, 80); doc.setFont('helvetica','bold'); doc.setFontSize(24); doc.text(studentName, 110, 80); doc.setFont('helvetica','normal'); doc.setFontSize(16); doc.text('for successfully completing', 100, 100); doc.text('Chapter 1: Addition', 110, 115); doc.text(`with a final score of ${score} out of 5.`, 95, 130); doc.setFontSize(12); doc.text(`Date: ${new Date().toLocaleDateString()}`, 40, 160); doc.text('Signature: ______________________', 200, 160); doc.setTextColor(0,128,255); doc.setFontSize(14); doc.text('Keep learning and shining! 🌟', 110, 180); doc.save(`${studentName}_Certificate.pdf`); }
</script>
</body>
</html>
